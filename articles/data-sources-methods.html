<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Sources and Methods • edfinr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Sources and Methods">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">edfinr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/basic-usage.html">Basic usage of edfinr</a></li>
    <li><a class="dropdown-item" href="../articles/cpi-adjustments.html">CPI Adjustments</a></li>
    <li><a class="dropdown-item" href="../articles/data-sources-methods.html">Data sources and methods</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bellwetherorg/edfinr"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Data Sources and Methods</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bellwetherorg/edfinr/blob/main/vignettes/data-sources-methods.Rmd" class="external-link"><code>vignettes/data-sources-methods.Rmd</code></a></small>
      <div class="d-none name"><code>data-sources-methods.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This vignette provides detailed information about the data sources,
processing methods, and quality controls used in the <code>edfinr</code>
package. Understanding these details will help you interpret the data
correctly and make appropriate analytical decisions.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/bellwetherorg/edfinr" class="external-link">edfinr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-sources">Data Sources<a class="anchor" aria-label="anchor" href="#data-sources"></a>
</h2>
<p>This package provides access to education finance data from:</p>
<ul>
<li><a href="https://nces.ed.gov/ccd/files.asp" class="external-link">NCES CCD F-33
Data</a></li>
<li>NCES CCD Directory Data via the <a href="https://educationdata.urban.org/documentation/#r" class="external-link">Urban
Institute’s <code>educationdata</code> package</a>
</li>
<li><a href="https://www.census.gov/programs-surveys/saipe.html" class="external-link">Census
Bureau SAIPE Estimates</a></li>
<li>American Community Survey 5-Year Estimates via <a href="https://walker-data.com/tidycensus/" class="external-link"><code>tidycensus</code>
package</a>
</li>
<li>U.S Bureau of Labor Statistics <a href="https://data.bls.gov/toppicks?survey=cu" class="external-link">Consumer Price Index for
All Urban Consumers (CPI-U)</a>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="data-processing-methods">Data Processing Methods<a class="anchor" aria-label="anchor" href="#data-processing-methods"></a>
</h2>
<ul>
<li>Methodology based on process used by <a href="https://github.com/EdBuild/edbuildr" class="external-link"><code>edbuildr</code></a>,
which is detailed on a <a href="http://data.edbuild.org/" class="external-link">methodology
page</a> and in their <a href="http://viz.edbuild.org/workshops/edbuildr/" class="external-link">workshop
documentation</a>.</li>
<li>The <a href="https://data-dictionary.ed-fund.org/?_gl=1*199anoz*_ga*MTg3MDM3NDg2LjE3MzkzNzAzOTE.*_ga_TGH6XK399M*MTc0NDIyMzY3Ni43LjEuMTc0NDIyMzY4MC4wLjAuMA.." class="external-link">EdFund
Data Dictionary</a> informs our handling of F-33 data.</li>
<li>Revenue adjustments for payments to other school systems follows the
approach used by Kristen Blagg, Emily Gutierrez, and Fanny Terrones in
<a href="https://apps.urban.org/features/school-funding-trends/files/202204_K12_funding_technical_appendix.pdf" class="external-link">Funding
Flows: Which Students Receive a Greater Share of School
Funding?</a>.</li>
<li>Inflation adjustments use an average of second half CPI-U of one
year and first half CPI-U of the following year to align with the
academic calendar.</li>
</ul>
</div>
<div class="section level2">
<h2 id="data-processing-detail">Data Processing Detail<a class="anchor" aria-label="anchor" href="#data-processing-detail"></a>
</h2>
<div class="section level3">
<h3 id="nces-f-33-survey-data">NCES F-33 Survey Data<a class="anchor" aria-label="anchor" href="#nces-f-33-survey-data"></a>
</h3>
<p>Data source: NCES Common Core of Data text files of F-33 data from
2011-12 through 2021-22.</p>
<p>Raw variables selected:</p>
<ul>
<li>Basic information: state, leaid, name, yrdata, V33</li>
<li>Revenue data: totalrev, tlocrev, tstrev, tfedrev</li>
<li>Expenditure data: c11, u11, v91, v92, c24, l12, m12, d11, q11</li>
<li>Current expenditure data: ce1, ce2, and ce3</li>
<li>Detailed expenditure data: z32, z34, v93, v95, v02, k14, e13, z33,
v10, e17, v11, v12, e07, v13, v14, e08, v15, v16, e09, v17, v18, v40,
v21, v22, v45, v23, v24, v90, v37, v38, e11, v29, v30, v60, v32, v65,
ae1, ae2, ae3, ae4, ae5, ae6, ae7, ae8</li>
</ul>
<p>Adjustments:</p>
<ul>
<li>Rename variables</li>
<li>Convert district names to title case</li>
<li>Ensure enrollment is a numeric variable</li>
<li>Replace <code>-1</code> and <code>-2</code> codes with
<code>NA</code> values</li>
</ul>
</div>
<div class="section level3">
<h3 id="ccd-directory-data">CCD Directory Data<a class="anchor" aria-label="anchor" href="#ccd-directory-data"></a>
</h3>
<p>Data source: NCES CCD Directory data obtained via the <a href="https://educationdata.urban.org/documentation/#r" class="external-link">educationdata</a>
package.</p>
<p>Raw variables selected:</p>
<ul>
<li>Core district identifiers and location: state, ncesid, county,
dist_name, state_leaid</li>
<li>Institutional details: lea_type, lea_type_id, urbanicity,
congressional_dist</li>
</ul>
<p>Adjustments:</p>
<ul>
<li>Rename variables to more intuitive names</li>
</ul>
</div>
<div class="section level3">
<h3 id="saipe-poverty-estimates">SAIPE Poverty Estimates<a class="anchor" aria-label="anchor" href="#saipe-poverty-estimates"></a>
</h3>
<p>Data source: Census Bureau SAIPE Estimates</p>
<p>Raw variables selected:</p>
<ul>
<li>Basic geographic and demographic fields: State Postal Code, State
FIPS Code, District ID, Name</li>
<li>Population estimates: Estimated Total Population, Estimated
Population 5-17, and the estimated number of relevant children 5 to 17
years old in poverty</li>
</ul>
<p>Adjustments:</p>
<ul>
<li>Convert population fields to numeric</li>
<li>Construct a combined NCES district identifier by concatenating state
FIPS and District ID</li>
</ul>
</div>
<div class="section level3">
<h3 id="acs-5-year-estimates">ACS 5-Year Estimates<a class="anchor" aria-label="anchor" href="#acs-5-year-estimates"></a>
</h3>
<p>Data source: American Community Survey 5-Year Estimates accessed via
the <a href="https://walker-data.com/tidycensus/" class="external-link"><code>tidycensus</code></a>
package</p>
<p>Raw variables selected:</p>
<ul>
<li>Economic indicators: Median household income (B19013_001) and median
property value (B25077_001)</li>
<li>Educational attainment: Total population 25 years or older
(B15003_001) and subsets of that population holding bachelor’s degrees
(B15003_022), master’s degrees (B15003_023), professional degrees
(B15003_024), and doctoral degrees (B15003_025).</li>
<li>Data are pulled for different geographic breakdowns (unified,
elementary, and secondary school districts)</li>
</ul>
<p>Adjustments:</p>
<ul>
<li>Reshape data from long to wide format</li>
<li>Rename “GEOID” to a standard <code>ncesid</code> and ensure proper
formatting of district identifiers</li>
<li>Convert estimates to numeric as needed</li>
</ul>
</div>
<div class="section level3">
<h3 id="cpi">CPI<a class="anchor" aria-label="anchor" href="#cpi"></a>
</h3>
<p>Data source: U.S. Bureau of Labor Statistics, specifically the
Consumer Price Index for All Urban Consumers (CPI-U)</p>
<p>Raw variables selected:</p>
<ul>
<li>CPI time series data (specific variable names as provided in the raw
file)</li>
</ul>
<p>Adjustments:</p>
<ul>
<li>Calculate an averaged CPI value using the second half of one year
and the first half of the following year to align with the academic
calendar, with the 2011-12 school year as the baseline year</li>
<li>Clean and reformat CPI data for consistency across processing
scripts</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="joining-data">Joining Data<a class="anchor" aria-label="anchor" href="#joining-data"></a>
</h2>
<ul>
<li>The joining process is implemented in the
<code>07_edfinr_join_and_exclude.R</code> script.</li>
<li>Data from the F-33 survey, CCD Directory, ACS (unified, elementary,
and secondary), and SAIPE sources are merged using left joins on shared
district identifiers (ncesid) and fiscal year.</li>
<li>The procedure ensures that each district record is enriched with
revenue, expenditure, demographic, and economic data.</li>
</ul>
</div>
<div class="section level2">
<h2 id="revenue-adjustments">Revenue Adjustments<a class="anchor" aria-label="anchor" href="#revenue-adjustments"></a>
</h2>
<p>Additional transformations are applied after the join: - Capital
expenditures and debt service (C11) are subtrated from state revenues -
Property sales (U11) are subtracted from local revenues - For Texas LEAs
in 2012-13 and earlier, payments to state governments (L12) are
subtracted from local revenues - Payments to other school systems (V91,
V92, and Q11) are proportionally subracted from local, state, and
federal revenues</p>
</div>
<div class="section level2">
<h2 id="exclusions">Exclusions<a class="anchor" aria-label="anchor" href="#exclusions"></a>
</h2>
<ul>
<li>Districts with enrollment less than 0 are removed.</li>
<li>Districts with total revenue less than 0 are removed.</li>
<li>Districts with an invalid LEA type (i.e. where lea_type_id is not
one of 1, 2, 3, or 7) are excluded.</li>
<li>Districts with invalid LEA/school level type (i.e. where schlev is
not one of “01”, “02”, or “03”, except for specified CA exceptions) are
excluded.</li>
<li>Districts where total revenue per-pupil is greater than $70,000 in
2011-12 dollars are excluded.</li>
<li>Districts where total revenue per pupil is less than $500 in 2011-12
dollars are excluded.</li>
<li>Connecticut LEAs consisting of semi-private high schools are removed
(NCES IDs “0905371”, “0905372”, and “0905373”).</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alex Spurrier, Krista Kaput.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
